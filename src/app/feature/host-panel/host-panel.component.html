<div class="host-panel" *ngIf="(settings$ | async) as settings">
  <div class="panel-header">
    <h3>ğŸ® Host Controls</h3>
    <span class="game-status" [class.ended]="$any(settings).gameEnded">
      {{ $any(settings).gameEnded ? 'Game Ended' : 'Game Active' }}
    </span>
  </div>

  <div class="control-section">
    <label>Leaderboard Visibility</label>
    <div class="button-group">
      <button 
        class="control-btn"
        [class.active]="$any(settings).visibilityMode === 'OFF'"
        [disabled]="$any(settings).gameEnded"
        (click)="setVisibility('OFF')"
        aria-label="Hide leaderboard">
        ğŸš« OFF
      </button>
      <button 
        class="control-btn"
        [class.active]="$any(settings).visibilityMode === 'ON'"
        [disabled]="$any(settings).gameEnded"
        (click)="setVisibility('ON')"
        aria-label="Show leaderboard">
        ğŸ‘ï¸ ON
      </button>
      <button 
        class="control-btn"
        [class.active]="$any(settings).visibilityMode === 'END_ONLY'"
        [disabled]="$any(settings).gameEnded"
        (click)="setVisibility('END_ONLY')"
        aria-label="Show only at end">
        ğŸ END ONLY
      </button>
    </div>
  </div>

  <div class="control-section">
    <label>Game State</label>
    <div class="button-group">
      <button 
        *ngIf="!$any(settings).gameEnded"
        class="control-btn end-game-btn"
        (click)="endGame()"
        aria-label="End game">
        ğŸ† End Game
      </button>
      <button 
        *ngIf="$any(settings).gameEnded"
        class="control-btn new-game-btn"
        (click)="startNewGame()"
        aria-label="Start new game">
        ğŸ”„ New Game
      </button>
    </div>
  </div>

  <div class="info-section">
    <p class="info-text">
      <span *ngIf="$any(settings).visibilityMode === 'OFF'">
        â„¹ï¸ Leaderboard is hidden from players
      </span>
      <span *ngIf="$any(settings).visibilityMode === 'ON'">
        â„¹ï¸ Leaderboard is visible and updating
      </span>
      <span *ngIf="$any(settings).visibilityMode === 'END_ONLY' && !$any(settings).gameEnded">
        â„¹ï¸ Leaderboard will reveal when game ends
      </span>
      <span *ngIf="$any(settings).visibilityMode === 'END_ONLY' && $any(settings).gameEnded">
        â„¹ï¸ Final standings revealed!
      </span>
    </p>
  </div>
</div>
