<div 
  class="leaderboard-row"
  [class.top-1]="entry.stats.currentRank === 1"
  [class.top-2]="entry.stats.currentRank === 2"
  [class.top-3]="entry.stats.currentRank === 3"
  [attr.data-player-id]="entry.player.playerId"
  [@rowHighlight]="getHighlightState()"
  [@cinematicReveal]="{ value: entry.justEntered, params: { delay: cinematicDelay } }">
  
  <!-- Rank Badge -->
  <div class="rank-section" [class]="getRankClass()">
    <div class="rank-badge" [@rankBadge]="entry.stats.currentRank">
      <span class="rank-number">{{ entry.stats.currentRank }}</span>
      <span *ngIf="entry.stats.currentRank === 1" class="crown">ðŸ‘‘</span>
    </div>
    
    <!-- Delta Label -->
    <div 
      *ngIf="entry.showDeltaLabel && entry.stats.lastDeltaRank !== 0"
      class="delta-label"
      [class.positive]="entry.stats.lastDeltaRank > 0"
      [class.negative]="entry.stats.lastDeltaRank < 0"
      [@deltaLabel]>
      {{ getDeltaLabel() }}
    </div>
  </div>

  <!-- Player Info -->
  <div class="player-section">
    <div class="player-avatar" [style.background-color]="entry.player.color || '#4ECDC4'">
      {{ entry.player.nickname.charAt(0).toUpperCase() }}
    </div>
    <div class="player-info">
      <div class="player-name">
        {{ entry.player.nickname }}
        <span *ngIf="entry.stats.currentRank === 1" class="champion-badge">Champion</span>
      </div>
      <div class="player-stats-mini">
        <span class="stat">{{ entry.stats.totalCorrect }}/{{ entry.stats.totalAnswered }}</span>
        <span class="separator">â€¢</span>
        <span class="stat">{{ formatTime(entry.stats.averageSpeedMs) }} avg</span>
      </div>
    </div>
  </div>

  <!-- Score Section -->
  <div class="score-section">
    <div class="score-value" [@scoreChange]="displayedScore">
      {{ displayedScore }}
      <span class="score-delta" *ngIf="entry.stats.lastScoreDelta !== 0">
        {{ entry.stats.lastScoreDelta > 0 ? '+' : '' }}{{ entry.stats.lastScoreDelta }}
      </span>
    </div>
    <div class="score-label">Points</div>
  </div>

  <!-- Accuracy Section -->
  <div class="accuracy-section">
    <div class="accuracy-bar">
      <div 
        class="accuracy-fill" 
        [style.width.%]="entry.stats.accuracyPercent"
        [class.high]="entry.stats.accuracyPercent >= 70"
        [class.medium]="entry.stats.accuracyPercent >= 40 && entry.stats.accuracyPercent < 70"
        [class.low]="entry.stats.accuracyPercent < 40">
      </div>
    </div>
    <div class="accuracy-label">{{ entry.stats.accuracyPercent }}%</div>
  </div>

  <!-- Badges Section -->
  <div class="badges-section">
    <span 
      *ngIf="hasStreak()" 
      class="badge streak-badge"
      [@badgePop]
      [title]="'Streak: ' + entry.stats.streakCorrect">
      ðŸ”¥ {{ entry.stats.streakCorrect }}
    </span>
    
    <span 
      *ngIf="getSpeedBadge() as speedBadge"
      class="badge speed-badge"
      [class]="speedBadge.class"
      [@badgePop]>
      {{ speedBadge.icon }}
    </span>
  </div>

  <!-- Glow effect for top ranks -->
  <div class="row-glow" *ngIf="entry.stats.currentRank <= 3"></div>
</div>
