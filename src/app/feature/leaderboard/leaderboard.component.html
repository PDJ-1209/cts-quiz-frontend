<div class="leaderboard-wrapper" [@containerFade]="getVisibilityState()">
  <!-- Hidden Placeholder -->
  <div *ngIf="!isVisible" class="leaderboard-hidden" [@placeholderPulse]>
    <div class="hidden-icon">ğŸ”’</div>
    <h2>Leaderboard Hidden</h2>
    <p>The host has hidden the leaderboard</p>
  </div>

  <!-- Leaderboard Container -->
  <div *ngIf="isVisible" class="leaderboard-container" [class.cinematic]="isCinematicReveal">
    <div class="leaderboard-header">
      <h1 class="leaderboard-title">
        <span class="title-icon">ğŸ†</span>
        Leaderboard
        <span class="title-glow"></span>
      </h1>
      <div class="header-stats" *ngIf="entries.length > 0">
        <span class="stat-item">
          <span class="stat-label">Players:</span>
          <span class="stat-value">{{ entries.length }}</span>
        </span>
      </div>
      <!-- Connection Status Indicator -->
      <div class="connection-status" [class.connected]="isConnected" [class.disconnected]="!isConnected">
        <span class="status-indicator"></span>
        <span class="status-text">{{ isConnected ? 'Live' : 'Connecting...' }}</span>
      </div>
    </div>

    <div 
      class="leaderboard-list" 
      #leaderboardList
      role="list"
      aria-label="Quiz leaderboard">
      <app-leaderboard-row
        *ngFor="let entry of entries; trackBy: trackByPlayerId; let i = index"
        [entry]="entry"
        [config]="config"
        [cinematicDelay]="getCinematicDelay(i)"
        role="listitem"
        [attr.aria-label]="'Rank ' + entry.stats.currentRank + ': ' + entry.player.nickname + ' with ' + entry.stats.totalScore + ' points'">
      </app-leaderboard-row>

      <!-- Empty State -->
      <div *ngIf="entries.length === 0" class="empty-state">
        <div class="empty-icon">ğŸ“Š</div>
        <p>No players yet</p>
        <p class="empty-subtitle">Waiting for quiz answers...</p>
      </div>
    </div>

    <!-- Cinematic overlay for END_ONLY reveal -->
    <div *ngIf="isCinematicReveal" class="cinematic-overlay">
      <div class="spotlight spotlight-1"></div>
      <div class="spotlight spotlight-2"></div>
      <div class="spotlight spotlight-3"></div>
    </div>
  </div>
</div>
